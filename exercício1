<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo da Adivinha√ß√£o</title>
</head>
<body style="font-family: Arial; text-align:center; margin-top: 50px;">
    <h2>üéØ Jogo da Adivinha√ß√£o com N√≠veis</h2>

    <?php
    // Fun√ß√£o que define as tentativas conforme o n√≠vel
    function definirTentativas($nivel) {
        if ($nivel == "facil") return 10;
        if ($nivel == "medio") return 5;
        if ($nivel == "dificil") return 3;
        return 5;
    }

    // Se ainda n√£o come√ßou o jogo
    if (!isset($_POST['numero_secreto'])) {
        echo '
        <form method="post">
            <label>Escolha o n√≠vel de dificuldade:</label><br><br>
            <select name="nivel" required>
                <option value="facil">F√°cil (10 tentativas)</option>
                <option value="medio">M√©dio (5 tentativas)</option>
                <option value="dificil">Dif√≠cil (3 tentativas)</option>
            </select><br><br>
            <button type="submit" name="iniciar">Iniciar Jogo</button>
        </form>
        ';
    } 
    else {
        // Pega os valores do formul√°rio anterior
        $nivel = $_POST['nivel'];
        $numero_secreto = $_POST['numero_secreto'];
        $tentativas = $_POST['tentativas'];
        $max_tentativas = $_POST['max_tentativas'];
        $mensagem = "";

        // Se o jogador enviou um palpite
        if (isset($_POST['palpite'])) {
            $palpite = (int)$_POST['palpite'];
            $tentativas++;

            if ($palpite == $numero_secreto) {
                $mensagem = "üéâ Parab√©ns! Voc√™ acertou o n√∫mero <b>$numero_secreto</b> em $tentativas tentativa(s)!";
                $fim = true;
            } elseif ($tentativas >= $max_tentativas) {
                $mensagem = "‚ùå Fim de jogo! O n√∫mero secreto era <b>$numero_secreto</b>.";
                $fim = true;
            } elseif ($palpite > $numero_secreto) {
                $mensagem = "Seu palpite ($palpite) √© <b>maior</b> que o n√∫mero secreto.";
                $fim = false;
            } else {
                $mensagem = "Seu palpite ($palpite) √© <b>menor</b> que o n√∫mero secreto.";
                $fim = false;
            }
        } else {
            $mensagem = "O jogo come√ßou! Boa sorte!";
            $fim = false;
        }

        echo "<p><b>N√≠vel:</b> " . ucfirst($nivel) . " | Tentativa: $tentativas / $max_tentativas</p>";

        echo "<p>$mensagem</p>";

        // Se o jogo ainda n√£o acabou
        if (!$fim) {
            echo '
            <form method="post">
                <label>Digite seu palpite (1 a 100):</label><br><br>
                <input type="number" name="palpite" min="1" max="100" required><br><br>
                
                <input type="hidden" name="nivel" value="'.$nivel.'">
                <input type="hidden" name="numero_secreto" value="'.$numero_secreto.'">
                <input type="hidden" name="tentativas" value="'.$tentativas.'">
                <input type="hidden" name="max_tentativas" value="'.$max_tentativas.'">

                <button type="submit">Enviar Palpite</button>
            </form>
            ';
        } else {
            echo '<br><a href="index.php">üîÅ Jogar Novamente</a>';
        }
    }

    // Se o jogador clicou em "Iniciar Jogo"
    if (isset($_POST['iniciar'])) {
        $nivel = $_POST['nivel'];
        $max_tentativas = definirTentativas($nivel);
        $numero_secreto = rand(1, 100);
        $tentativas = 0;

        echo '
        <form method="post">
            <p>O jogo come√ßou! Voc√™ tem '.$max_tentativas.' tentativas.</p>
            <label>Digite seu palpite (1 a 100):</label><br><br>
            <input type="number" name="palpite" min="1" max="100" required><br><br>

            <input type="hidden" name="nivel" value="'.$nivel.'">
            <input type="hidden" name="numero_secreto" value="'.$numero_secreto.'">
            <input type="hidden" name="tentativas" value="'.$tentativas.'">
            <input type="hidden" name="max_tentativas" value="'.$max_tentativas.'">

            <button type="submit">Enviar Palpite</button>
        </form>
        ';
    }
    ?>
</body>
</html>